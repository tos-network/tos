name: "Time-Based Operations"
description: "Test time-dependent operations and time control"

genesis:
  accounts:
    - name: "alice"
      balance: "1000000000000"
    - name: "bob"
      balance: "500000000000"

steps:
  # Initial transfer at T=0
  - action: "transfer"
    from: "alice"
    to: "bob"
    amount: "100000000000"
    fee: "50"

  - action: "mine_block"

  # Advance time by 1 hour (3600 seconds)
  - action: "advance_time"
    seconds: 3600

  # Second transfer after time advancement
  - action: "transfer"
    from: "alice"
    to: "bob"
    amount: "200000000000"
    fee: "50"

  - action: "mine_block"

  # Advance time by 1 day (86400 seconds)
  - action: "advance_time"
    seconds: 86400

  # Third transfer after 1 day
  - action: "transfer"
    from: "alice"
    to: "bob"
    amount: "150000000000"
    fee: "50"

  - action: "mine_block"

  # Verify final balances
  - action: "assert_balance"
    account: "alice"
    within:
      target: "549999999850"  # 1000 - 100 - 200 - 150 - fees
      tolerance: "500"

  - action: "assert_balance"
    account: "bob"
    within:
      target: "950000000000"  # 500 + 100 + 200 + 150
      tolerance: "500"

  # Verify 3 transactions processed
  - action: "assert_nonce"
    account: "alice"
    eq: 3

  # Advance time by 1 week (604800 seconds)
  - action: "advance_time"
    seconds: 604800

  # Final verification - balances should remain stable
  - action: "assert_balance"
    account: "alice"
    compare:
      lte: "600000000000"

  - action: "assert_balance"
    account: "bob"
    compare:
      gte: "900000000000"
