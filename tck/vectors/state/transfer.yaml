# State Transition Vectors: Transfer
# Schema Version: 1.0
# Generator: TOS Rust (template)
# Generated: 2026-02-03

schema_version: 1
domain: "state"
generator: "TOS Rust v1.0.0 (template)"
generated_at: "2026-02-03T00:00:00Z"

test_vectors:
  - name: "transfer_basic"
    description: "Basic transfer between two accounts"

    pre_state:
      accounts:
        - address_hex: "01aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"
          alias: "alice"
          balance: 1000
          nonce: 5
          frozen: 0
          energy: 100
          flags: 0
        - address_hex: "01bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb"
          alias: "bob"
          balance: 500
          nonce: 3
          frozen: 0
          energy: 50
          flags: 0
      global:
        total_supply: 10000
        total_burned: 0
        block_height: 100

    transaction:
      type: "Transfer"
      type_id: 1
      sender: "alice"
      nonce: 5
      fee: 1
      timestamp: 1700000000000
      payload:
        recipient: "bob"
        amount: 100

    expected:
      status: "success"
      error_code: 0x0000

    post_state:
      accounts:
        - address_hex: "01aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"
          alias: "alice"
          balance: 899
          nonce: 6
          frozen: 0
          energy: 100
          flags: 0
        - address_hex: "01bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb"
          alias: "bob"
          balance: 600
          nonce: 3
          frozen: 0
          energy: 50
          flags: 0
      global:
        total_supply: 9999
        total_burned: 1
        block_height: 100

  - name: "transfer_to_new_account"
    description: "Transfer to an account that doesn't exist yet"

    pre_state:
      accounts:
        - address_hex: "01aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"
          alias: "alice"
          balance: 1000
          nonce: 0
          frozen: 0
          energy: 100
          flags: 0
      global:
        total_supply: 1000
        total_burned: 0
        block_height: 50

    transaction:
      type: "Transfer"
      type_id: 1
      sender: "alice"
      nonce: 0
      fee: 1
      timestamp: 1700000000000
      payload:
        recipient: "carol"
        recipient_hex: "01cccccccccccccccccccccccccccccccccccccccc"
        amount: 200

    expected:
      status: "success"
      error_code: 0x0000

    post_state:
      accounts:
        - address_hex: "01aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"
          alias: "alice"
          balance: 799
          nonce: 1
          frozen: 0
          energy: 100
          flags: 0
        - address_hex: "01cccccccccccccccccccccccccccccccccccccccc"
          alias: "carol"
          balance: 200
          nonce: 0
          frozen: 0
          energy: 0
          flags: 0
      global:
        total_supply: 999
        total_burned: 1
        block_height: 50

  - name: "transfer_max_balance"
    description: "Transfer entire balance minus fee"

    pre_state:
      accounts:
        - address_hex: "01aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"
          alias: "alice"
          balance: 101
          nonce: 0
          frozen: 0
          energy: 50
          flags: 0
        - address_hex: "01bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb"
          alias: "bob"
          balance: 0
          nonce: 0
          frozen: 0
          energy: 0
          flags: 0
      global:
        total_supply: 101
        total_burned: 0
        block_height: 10

    transaction:
      type: "Transfer"
      type_id: 1
      sender: "alice"
      nonce: 0
      fee: 1
      timestamp: 1700000000000
      payload:
        recipient: "bob"
        amount: 100

    expected:
      status: "success"
      error_code: 0x0000

    post_state:
      accounts:
        - address_hex: "01aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"
          alias: "alice"
          balance: 0
          nonce: 1
          frozen: 0
          energy: 50
          flags: 0
        - address_hex: "01bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb"
          alias: "bob"
          balance: 100
          nonce: 0
          frozen: 0
          energy: 0
          flags: 0
      global:
        total_supply: 100
        total_burned: 1
        block_height: 10
